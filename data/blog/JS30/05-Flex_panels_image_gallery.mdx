---
title: 'JS30 - 05 Flex Panels Image Gallery'
date: '2025-02-03'
tags: ['JS30', 'JavaScript']
draft: false
summary: 'JS30 Day5 æŒ‘æˆ°ï¼Œé€é Flexbox è£½ä½œä¸€å€‹åœ–ç‰‡å±•ç¤ºé é¢ï¼Œæ¯å¼µåœ–ç‰‡åœ¨é»æ“Šæ™‚æœƒæœ‰å‹•ç•«æ•ˆæœï¼Œä¸¦å±•é–‹åœ–ç‰‡ä¸¦é¡¯ç¤ºæ›´å¤šæ–‡å­—å…§å®¹'
authors: ['default']
images: ['/static/images/JS30.jpg']
canonicalUrl:
---

![](https://mhchihuahua.github.io/JavaScript30/images/05.png)

ğŸš€ [Demo Link](https://mhchihuahua.github.io/JavaScript30/05/)

é€é Flexbox è£½ä½œä¸€å€‹åœ–ç‰‡å±•ç¤ºé é¢ï¼Œæ¯å¼µåœ–ç‰‡åœ¨é»æ“Šæ™‚æœƒæœ‰å‹•ç•«æ•ˆæœï¼Œä¸¦å±•é–‹åœ–ç‰‡ä¸¦é¡¯ç¤ºæ›´å¤šæ–‡å­—å…§å®¹

- `flex` å±¬æ€§ä¾†è¨­å®šåœ–ç‰‡çš„æ’åˆ—æ–¹å¼å’Œé»æ“Šå¾Œçš„å±•é–‹æ•ˆæœ

---

## CSSï¼šFlexbox

åœ¨é€™å€‹æŒ‘æˆ°ä¸­ï¼Œä½¿ç”¨ Flexbox è®“ `.panel`ï¼ˆåœ–ç‰‡å€å¡Šï¼‰èƒ½å¤ ä¸¦æ’é¡¯ç¤ºï¼Œä¸¦ä¸”é»æ“Šæ™‚å¯ä»¥é€é `flex` å‹•æ…‹èª¿æ•´å¤§å°ï¼Œç”¢ç”Ÿå±•é–‹æ•ˆæœ

### 1ï¸âƒ£ è¨­å®š Flex å®¹å™¨

åœ¨ `.panels` ä¸Šè¨­å®š `display: flex`ï¼Œè®“ `.panel` å…ƒç´ è®Šæˆ Flexbox çš„å­é …ç›®ï¼ˆflex itemsï¼‰ï¼Œä¸¦é€é `flex` å±¬æ€§æ§åˆ¶å…¶å¤§å°

```css
.panels {
  display: flex;
}
```

### 2ï¸âƒ£ è¨­å®š Flex å­é …ç›®

åœ¨ `.panel` ä¸Šè¨­å®š `flex: 1`ï¼Œè®“æ¯å€‹ `.panel` å…ƒç´ å¹³å‡åˆ†é…å‰©é¤˜ç©ºé–“ï¼Œä¸¦ä¸”é€é `flex` å±¬æ€§ä¾†è¨­å®šå±•é–‹æ•ˆæœã€‚
é€é `flex-direction: column` ä¾†è¨­å®š `.panel` å…ƒç´ çš„æ’åˆ—æ–¹å‘ç‚ºå‚ç›´ï¼Œä¸¦é€é `justify-content: center` ä¾†è®“å…§å®¹ç½®ä¸­

```css
.panel {
  flex: 1;
  display: flex;
  flex-direction: column;
  justify-content: center;
}
```

#### Main-axis å’Œ Cross-axis

- `flex-direction` å±¬æ€§ç”¨ä¾†è¨­å®š Main-axis çš„æ–¹å‘ï¼Œé è¨­ç‚º `row`ï¼ˆæ°´å¹³ï¼‰
- `justify-content` å±¬æ€§ç”¨ä¾†è¨­å®š **Main-axis** ä¸Šçš„å°é½Šæ–¹å¼
- `align-items` å±¬æ€§ç”¨ä¾†è¨­å®š **Cross-axis** ä¸Šçš„å°é½Šæ–¹å¼

ç•¶ `flex-direction` è¨­å®šç‚º `row` æ™‚ï¼ŒMain-axis ç‚ºæ©«å‘ï¼ŒCross-axis ç‚ºç¸±å‘

```plaintext
 â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Main Axis â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   â”‚ Item 1 â”‚ Item 2 â”‚ Item 3 â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚ Cross Axis
â†“
```

ç•¶ `flex-direction` è¨­å®šç‚º `column` æ™‚ï¼ŒMain-axis ç‚ºç¸±å‘ï¼ŒCross-axis ç‚ºæ©«å‘

```plaintext
â”‚ Main Axis
â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â”‚ Item 1 â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”‚ Item 2 â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”‚ Item 3 â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚
â†“  â”€â”€ Cross Axis â”€â”€â†’
```

### 3ï¸âƒ£ æ§åˆ¶é …ç›®å¤§å°ï¼ˆflexï¼‰

`flex` å±¬æ€§æ˜¯ `flex-grow`ã€`flex-shrink` å’Œ `flex-basis` çš„ç°¡å¯«ï¼Œç”¨ä¾†è¨­å®šå½ˆæ€§ç›’å­çš„ä¼¸ç¸®æ¯”ä¾‹ã€æ”¶ç¸®æ¯”ä¾‹å’ŒåŸºæº–å€¼

- `flex-grow`ï¼šç•¶æœ‰å¤šé¤˜ç©ºé–“æ™‚ï¼Œé …ç›®æ“´å±•çš„æ¯”ä¾‹ï¼ˆé è¨­ 0ï¼‰
- `flex-shrink`ï¼šç•¶ç©ºé–“ä¸è¶³æ™‚ï¼Œé …ç›®æ”¶ç¸®çš„æ¯”ä¾‹ï¼ˆé è¨­ 1ï¼‰
- `flex-basis`ï¼šè¨­å®šé …ç›®çš„åˆå§‹å¤§å°ï¼ˆé è¨­ autoï¼‰

åœ¨é€™å€‹æŒ‘æˆ°ä¸­ï¼Œè¦è®“ panel åˆå§‹æ™‚ç­‰å¯¬ï¼Œé»æ“Šæ™‚å¯ä»¥å±•é–‹ï¼Œå› æ­¤è¨­å®šç‚ºï¼š

```css
.panel {
  flex: 1;
}

.panel.open {
  flex: 2;
}
```

## JavaScript

### 1ï¸âƒ£ å–å¾— DOM å…ƒç´ ä¸¦ç›£è½äº‹ä»¶

å› ç‚ºè¦åšé»æ“Š panel å¾Œçš„å±•é–‹æ•ˆæœï¼Œæ‰€ä»¥è¦å–å¾— panels å…ƒç´ ï¼Œä¸¦ç›£è½ `click` äº‹ä»¶

```javascript
const panelsContainer = document.querySelector('.panels')
panelsContainer.addEventListener('click', togglePanel)
panelsContainer.addEventListener('transitionend', toggleActive)
```

- å› ç‚ºæ‰€æœ‰ `.panel` éƒ½æ˜¯ `.panels` çš„å­å…ƒç´ ï¼Œå¯ä»¥åœ¨ `.panels` ä¸Šç›£è½ `click`ï¼Œé€éäº‹ä»¶å†’æ³¡ä¾†è™•ç†é»æ“Šäº‹ä»¶ï¼Œé€™æ¨£ä¸éœ€è¦å°æ¯å€‹ `.panel` å–®ç¨ç›£è½ï¼Œæé«˜æ•ˆèƒ½

### 2ï¸âƒ£ å±•é–‹ panel

é€é `classList.toggle('open')` ä¾†åˆ‡æ› panel çš„å±•é–‹ç‹€æ…‹

```javascript
function togglePanel(e) {
  const panel = e.target.closest('.panel')
  if (!panel) return

  panel.classList.toggle('open')
}
```

- `closest()` æ–¹æ³•ç”¨ä¾†å–å¾—æœ€æ¥è¿‘çš„ `.panel`ï¼Œä¹Ÿå°±æ˜¯é»æ“Šçš„ panel
- `classList.toggle('open')` ç”¨ä¾†åˆ‡æ› `open` é¡åˆ¥ï¼Œå¦‚æœæœ‰ `open` é¡åˆ¥å‰‡ç§»é™¤ï¼›æ²’æœ‰ `open` é¡åˆ¥å‰‡æ·»åŠ 

### 3ï¸âƒ£ æ–‡å­—æ•ˆæœ

é€é `transitionend` äº‹ä»¶ç›£è½ï¼Œç•¶ flex å±¬æ€§å‹•ç•«çµæŸæ™‚ï¼Œåˆ‡æ› `.open-active` é¡åˆ¥

```javascript
function toggleActive(e) {
  if (e.target.classList.contains('panel') && e.propertyName.includes('flex')) {
    e.target.classList.toggle('open-active')
  }
}
```

- `propertyName` å¯èƒ½åœ¨ä¸åŒç€è¦½å™¨ä¸­å›å‚³ `flex` æˆ– `flex-grow`ï¼Œæ‰€ä»¥ç”¨ `includes("flex")` ä¾†ç¢ºä¿å…¼å®¹æ€§

---

## åƒè€ƒè³‡æ–™

- [CSS Flexbox Layout Guide](https://css-tricks.com/snippets/css/a-guide-to-flexbox/)
- [flex](https://developer.mozilla.org/en-US/docs/Web/CSS/flex)
- [Element: closest() method](https://developer.mozilla.org/en-US/docs/Web/API/Element/closest)
- [DOMTokenList: toggle() method](https://developer.mozilla.org/en-US/docs/Web/API/DOMTokenList/toggle)
