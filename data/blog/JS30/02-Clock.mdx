---
title: 'JS30 - 02 CSS + JS Clock'
date: '2025-01-30'
tags: ['JS30', 'JavaScript']
draft: false
summary: 'JS30 Day2 æŒ‘æˆ°ï¼Œé€é CSS + JavaScript è£½ä½œä¸€å€‹æ™‚é˜ã€‚ä½¿ç”¨ CSS ä¾†è¨­å®šæ™‚é˜æŒ‡é‡çš„æ¨£å¼èˆ‡æ—‹è½‰é»ï¼Œé€é JavaScript ä¾†è¨ˆç®—ç§’ã€åˆ†ã€æ™‚é‡çš„è§’åº¦ï¼Œä¸¦åˆ©ç”¨ `requestAnimationFrame` ä¾†æ›´æ–°ç•«é¢'
authors: ['default']
images: ['/static/images/JS30.jpg']
canonicalUrl:
---

![](https://mhchihuahua.github.io/JavaScript30/images/02.png)

ğŸš€ [Demo Link](https://mhchihuahua.github.io/JavaScript30/02/)

é€™ç¯‡ç­†è¨˜è¨˜éŒ„å¦‚ä½•ä½¿ç”¨ CSS + JavaScript è£½ä½œä¸€å€‹æ™‚é˜ï¼Œä¸¦ä¸”ç¢ºä¿æŒ‡é‡èƒ½å¤ é †æš¢é‹è¡Œ

- ä½¿ç”¨ CSS ä¾†è¨­å®šæ™‚é˜æŒ‡é‡çš„æ¨£å¼èˆ‡æ—‹è½‰é»
- é€é JavaScript ä¾†è¨ˆç®—ç§’ã€åˆ†ã€æ™‚é‡çš„è§’åº¦ï¼Œä¸¦åˆ©ç”¨ `requestAnimationFrame` ä¾†æ›´æ–°ç•«é¢

---

## CSSï¼šè¨­å®šæŒ‡é‡çš„æ—‹è½‰ä¸­å¿ƒé»

åˆå§‹æª”æ¡ˆå·²ç¶“æœ‰æä¾›æ™‚é˜çš„æ¨£å¼ï¼Œåªéœ€è¦å°æŒ‡é‡é€²è¡Œæ¨£å¼çš„è¨­å®š

é¦–å…ˆè¦å°æŒ‡é‡çš„æ—‹è½‰ä¸­å¿ƒé»é€²è¡Œè¨­ç½®ï¼Œå¦‚æœæ²’æœ‰è¨­å®šçš„è©±ï¼Œé è¨­åœ¨ `transform:rotate()` æ™‚ï¼Œæ˜¯ä»¥å…ƒç´ çš„ä¸­å¿ƒé»ç‚ºæ—‹è½‰ä¸­å¿ƒ

```css
.hand {
  /* ...å…¶ä»–è¨­å®š */
  transform-origin: 100%;
}
```

- `transform-origin` ç”¨ä¾†è¨­å®šæ—‹è½‰ä¸­å¿ƒï¼Œ100% ä»£è¡¨æŒ‡é‡çš„å³é‚Šä½œç‚ºæ—‹è½‰è»¸å¿ƒ
- æŒ‡é‡çš„åº•éƒ¨æœƒå›ºå®šåœ¨æ™‚é˜ä¸­å¤®ï¼Œè€Œå¦ä¸€ç«¯å‰‡åœç¹ä¸­å¿ƒè½‰å‹•

---

## JavaScriptï¼šè¨ˆç®—æŒ‡é‡çš„è§’åº¦ä¸¦æ›´æ–°ç•«é¢

### 1ï¸âƒ£ å–å¾—æŒ‡é‡çš„ DOM å…ƒç´ 

é€é `document.querySelector` é¸å–ç§’é‡ã€åˆ†é‡ã€æ™‚é‡çš„å…ƒç´ ï¼Œä¹‹å¾Œæœƒéœ€è¦æ›´æ”¹å®ƒå€‘çš„æ—‹è½‰è§’åº¦

```javascript
const secondHand = document.querySelector('.second-hand')
const minHand = document.querySelector('.min-hand')
const hourHand = document.querySelector('.hour-hand')
```

### 2ï¸âƒ£ å–å¾—ç•¶å‰æ™‚é–“ä¸¦è¨ˆç®—è§’åº¦

`setDate` å‡½å¼è² è²¬ï¼š

- å–å¾—ç•¶å‰æ™‚é–“ï¼ˆç§’ã€åˆ†ã€æ™‚ï¼‰
- è¨ˆç®—æ¯å€‹æŒ‡é‡å°æ‡‰çš„æ—‹è½‰è§’åº¦ï¼Œç¢ºä¿å®ƒå€‘èƒ½å¤ å¹³æ»‘ç§»å‹•

```javascript
const now = new Date()
const seconds = now.getSeconds()
const minutes = now.getMinutes() + seconds / 60
const hours = now.getHours() + minutes / 60
```

- åˆ†é˜åŠ ä¸Šç§’æ•¸çš„æ¯”ä¾‹ï¼Œæ™‚é˜åŠ ä¸Šåˆ†é˜çš„æ¯”ä¾‹ï¼Œè®“æ™‚é˜çš„æŒ‡é‡å‹•ç•«å¯ä»¥æ›´åŠ å¹³æ»‘æµæš¢

### 3ï¸âƒ£ è¨ˆç®—æ—‹è½‰è§’åº¦

```javascript
const secondsDegrees = (seconds / 60) * 360 + 90
const minsDegrees = (minutes / 60) * 360 + 90
const hoursDegrees = (hours / 12) * 360 + 90
```

- æ™‚é–“å°æ‡‰è§’åº¦çš„è¨ˆç®—æ–¹å¼
  - æ™‚é˜ä¸€åœˆæ˜¯ 360 åº¦
  - ç§’é‡æ˜¯ 60 ç§’ä¸€åœˆï¼Œå…ˆå°‡ç•¶å‰ç§’æ•¸é™¤ä»¥ 60 å–å¾—æ¯”ä¾‹ï¼Œå†ä¹˜ä¸Š 360 åº¦ï¼›åˆ†é‡åŒç†
  - æ™‚é‡æ˜¯ 12 å°æ™‚ä¸€åœˆï¼Œå…ˆå°‡ç•¶å‰å°æ™‚æ•¸é™¤ä»¥ 12 å–å¾—æ¯”ä¾‹ï¼Œå†ä¹˜ä¸Š 360 åº¦
- ç‚ºä»€éº¼ +90ï¼Ÿ
  - é è¨­çš„ rotate(0deg) æ˜¯æŒ‡å‘ 9 é»é˜æ–¹å‘ï¼Œä½†æˆ‘å€‘å¸Œæœ›å®ƒå¾ 12 é»é˜æ–¹å‘é–‹å§‹è½‰å‹•ï¼Œå› æ­¤éœ€è¦é¡å¤–åŠ  90Â° ä¾†èª¿æ•´åŸºæº–ã€‚

### 4ï¸âƒ£ æ›´æ–°æŒ‡é‡çš„æ—‹è½‰è§’åº¦

```javascript
secondHand.style.transform = `rotate(${secondsDegrees}deg)`
minHand.style.transform = `rotate(${minsDegrees}deg)`
hourHand.style.transform = `rotate(${hoursDegrees}deg)`
```

- é€é `style.transform` è¨­å®šæŒ‡é‡çš„ `rotate()` è§’åº¦ï¼Œè®“å®ƒå€‘æ—‹è½‰

### 5ï¸âƒ£ è®“æŒ‡é‡æŒçºŒæ›´æ–°

åŸå§‹çš„æ•™å­¸ä½¿ç”¨ `setInterval` ä¾†æ¯ç§’æ›´æ–°ä¸€æ¬¡ç•«é¢ï¼Œä½†é€™æ¨£æœƒæœ‰ä¸€äº›æ½›åœ¨å•é¡Œï¼š

- ç•¶é é¢ä¸åœ¨ç•«é¢ä¸Šæ™‚ï¼Œ`setInterval` ä»ç„¶æŒçºŒåŸ·è¡Œï¼Œå¯èƒ½å½±éŸ¿æ•ˆèƒ½
- ç€è¦½å™¨æœ‰å¯èƒ½æœƒå»¶é² `setInterval` çš„åŸ·è¡Œï¼Œä½¿å‹•ç•«è®Šå¾—ä¸æµæš¢

æ›´å¥½çš„è§£æ³•æ˜¯ `requestAnimationFrame`ï¼š

```javascript
function updateClock() {
  setDate()
  requestAnimationFrame(updateClock)
}

updateClock()
```

- `requestAnimationFrame` æœƒåœ¨ä¸‹ä¸€æ¬¡ç€è¦½å™¨ç¹ªè£½ç•«é¢æ™‚åŸ·è¡Œï¼Œç•¶é é¢ä¸åœ¨ç•«é¢ä¸Šæ™‚ï¼Œå®ƒæœƒè‡ªå‹•æš«åœï¼Œæå‡æ•ˆèƒ½
- è®“æŒ‡é‡çš„å‹•ç•«æ›´åŠ æµæš¢ï¼Œé¿å…äº† `setInterval` å¸¶ä¾†çš„æ•ˆèƒ½å•é¡Œ

---

## åƒè€ƒè³‡æ–™

- [transform-origin](https://developer.mozilla.org/en-US/docs/Web/CSS/transform-origin)
- [Date](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date)
- [Window.requestAnimationFrame()](https://developer.mozilla.org/zh-TW/docs/Web/API/Window/requestAnimationFrame)
