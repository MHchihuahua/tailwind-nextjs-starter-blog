---
title: 'JS30 - 03 Playing with CSS Variables and JS'
date: '2025-01-31'
tags: ['JS30', 'JavaScript']
draft: false
summary: 'JS30 Day3 æŒ‘æˆ°ï¼Œåˆ©ç”¨ CSS è®Šæ•¸ï¼ˆCustom Propertiesï¼‰å¯ä»¥æ›´éˆæ´»åœ°ç®¡ç†æ¨£å¼ï¼Œä¸¦ä¸”å¯ä»¥é€é JavaScript å‹•æ…‹æ›´æ–°ï¼Œå¯¦ç¾å³æ™‚è®ŠåŒ–ï¼Œä¾‹å¦‚é€™ç¯‡çš„èª¿æ•´é–“è·ã€æ¨¡ç³Šç¨‹åº¦ç­‰'
authors: ['default']
images: ['/static/images/JS30.jpg']
canonicalUrl:
---

![](https://mhchihuahua.github.io/JavaScript30/images/03.png)

ğŸš€ [Demo Link](https://mhchihuahua.github.io/JavaScript30/03/)

åˆ©ç”¨ CSS è®Šæ•¸ï¼ˆCustom Propertiesï¼‰å¯ä»¥æ›´éˆæ´»åœ°ç®¡ç†æ¨£å¼ï¼Œä¸¦ä¸”å¯ä»¥é€é JavaScript å‹•æ…‹æ›´æ–°ï¼Œå¯¦ç¾å³æ™‚è®ŠåŒ–ï¼Œä¾‹å¦‚é€™ç¯‡çš„èª¿æ•´é–“è·ã€æ¨¡ç³Šç¨‹åº¦ç­‰

- `--variableName: value` ç”¨ä¾†è¨­å®šè®Šæ•¸
- `document.documentElement.style.setProperty('--variableName', value)` ç”¨ä¾†æ›´æ–°è®Šæ•¸çš„å€¼

---

## CSSï¼šè¨­å®šè®Šæ•¸

`:root`ä»£è¡¨ html å…ƒç´ ï¼Œå¯ä»¥ç”¨ä¾†å®£å‘Šå…¨åŸŸ CSS è®Šæ•¸ã€‚ CSS è®Šæ•¸çš„å‘½åè¦å‰‡æ˜¯ä»¥ `--` é–‹é ­

```css
:root {
  --base: #46a3ff;
  --spacing: 5px;
  --blur: 1px;
}
```

- `--base` è¨­å®šé‚Šæ¡†å’Œæ¨™é¡Œ JS highlight é¡è‰²
- `--spacing` è¨­å®šé–“è·
- `--blur` è¨­å®šæ¨¡ç³Šç¨‹åº¦

## JavaScriptï¼šæ›´æ–°è®Šæ•¸çš„å€¼

### 1ï¸âƒ£ å–å¾— DOM å…ƒç´ ä¸¦ç›£è½äº‹ä»¶

å–å¾—çˆ¶å…ƒç´  `.controls`ï¼Œä¸¦åˆ©ç”¨äº‹ä»¶ä»£ç†ç›£è½ `input` äº‹ä»¶ï¼Œåªæœ‰ç•¶ç›®æ¨™å…ƒç´ æ˜¯ `input` æ™‚æ‰åŸ·è¡Œ

```javascript
document.querySelector('.controls').addEventListener('input', (event) => {
  if (!event.target.matches('input')) return
  //... æ›´æ–°è®Šæ•¸çš„å€¼
})
```

- è·Ÿ Day2 ä¸€æ¨£ï¼Œé€™è£¡ä¹Ÿæ˜¯é€éäº‹ä»¶ä»£ç†çš„æ–¹å¼æ¸›å°‘ç›£è½å™¨çš„æ•¸é‡ï¼Œä¸ç”¨å°‡äº‹ä»¶ç¶å®šåœ¨æ¯å€‹ `input` ä¸Š

### 2ï¸âƒ£ æ›´æ–°è®Šæ•¸çš„å€¼

é€é `document.documentElement.style.setProperty` ä¾†æ›´æ–°è®Šæ•¸çš„å€¼

```javascript
const suffix = event.target.dataset.sizing || ''
const value = `${event.target.value}${suffix}`
document.documentElement.style.setProperty(`--${event.target.name}`, value)
```

- `dataset.sizing` å–å¾— `data-sizing` çš„å€¼ï¼Œå¦‚æœæ²’æœ‰å€¼ï¼Œå‰‡è¨­ç‚ºç©ºå­—ä¸²
  - `data-sizing` ç”¨ä¾†è¨­å®š spacing å’Œ blur çš„å–®ä½
- `--${event.target.name}` ä»£è¡¨è®Šæ•¸åç¨±ï¼Œä¾‹å¦‚ `--spacing`ã€`--blur` ç­‰

---

## åƒè€ƒè³‡æ–™

- [:root](https://developer.mozilla.org/en-US/docs/Web/CSS/:root)
- [Using CSS custom properties (variables)](https://developer.mozilla.org/en-US/docs/Web/CSS/Using_CSS_custom_properties)
